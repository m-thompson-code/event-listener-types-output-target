# Summary

Stencil components currently don't generate event listener types which can make consuming Stencil components difficult when wanting to add an event listener in a TypeScript project:

```ts
const myComponent = document.createElement('my-component');

myComponent.addEventListener('my-event', event => {
  // TypeError: Property 'detail' does not exist on type 'Event'
  event.detail;
});
```

This target output generates additional types to make events type safe:

```ts
const myComponent = document.createElement('my-component');

myComponent.addEventListener('my-event', event => {
  // event is now of type MyComponentCustomEvent, and detail will have the proper type
  event.detail;
});
```

This will also allow components to have proper Output binding types in Angular projects:

```ts
@Component({
  selector: 'app-root',
  template: `<my-component (my-event)="handleMyEvent($event)" />`,
})
export class AppComponent {
  handleMyEvent(event: MyComponentCustomEvent<string>) {
    // event is property typed now and can be consumed without needing to type `event` as Event or any then use type assertion to its proper type
    event.detail;
  }
}
```

# How to Use

```bash
npm i -D event-listener-types-output-target
```

Update your stencil config to use this output target:

```ts
import { Config } from '@stencil/core';
import { outputEventListenerTypes } from 'output-event-listener-types';

export const config: Config = {
  // ...
  outputTargets: [
    // ...
    outputEventListenerTypes(),
  ],
};
```

Now when you build, `component-event-listeners.d.ts` will be generated next to your `components.d.ts` file. By default two copies will be generated:

1. `src/component-event-listeners.d.ts`
2. `dist/types/component-event-listeners.d.ts`

This is where `components.d.ts` files are generated by default, but you can override where the `component-event-listeners.d.ts` files are generated by setting `outputPaths`:

```ts
import { Config } from '@stencil/core';
import { outputEventListenerTypes } from 'output-event-listener-types';

export const config: Config = {
  // ...
  outputTargets: [
    // ...
    outputEventListenerTypes({
      outputPaths: ['some/custom/path/component-event-listeners.d.ts'],
    }),
  ],
};
```

## Output Target Options

1. `outputPaths` - Paths where generated event listener types will be stored. Path should include filename. Default if not defined is:
   ```ts
   ['src/component-event-listeners.d.ts', 'dist/types/component-event-listeners.d.ts'];
   ```
2. `importPath` - The generated event listener types depend on types from `components.d.ts`. Setting this will define the path where those types will be imported from. Default if not defined is:
   ```ts
   './components';
   ```
3. `excludeComponents` - List of components to not generate event listener types. Values should be the tag name of the component.

# Development

```bash
npm i # Install dependencies
npm run test # Run unit tests
npm run test.watch i # Run unit tests in watch mode
```
